<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>
        刘晨曦的个人博客
    </title>
    
<link rel="stylesheet" href="/libs/highlight/styles/monokai-sublime.css">

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.3.0"></head>

<body id="bodyx">
    <div class="hd posts">
    <a href="/index.html"><i class="fa fa-reply replay-btn" aria-hidden="true"></i></a>
    <div class="post-title">
        <p>
            严格模式和变量提升
        </p>
        <hr>
    </div>
    <div class="post-content">
        <h2 id="严格模式"><a href="#严格模式" class="headerlink" title="严格模式"></a>严格模式</h2><p>使用 “use strict” 指令<br>“use strict” 指令在 JavaScript 1.8.5 (ECMAScript5) 中新增。</p>
<p>它不是一条语句，但是是一个字面量表达式，在 JavaScript 旧版本中会被忽略。</p>
<p>“use strict” 的目的是指定代码在严格条件下执行。</p>
<p>严格模式下你不能使用未声明的变量。</p>
<p>Note    支持严格模式的浏览器:<br>Internet Explorer 10 +、 Firefox 4+ Chrome 13+、 Safari 5.1+、 Opera 12+。<br>严格模式声明<br>严格模式通过在脚本或函数的头部添加 use strict; 表达式来声明。</p>
<p>实例中我们可以在浏览器按下 F12 (或点击”工具&gt;更多工具&gt;开发者工具”) 开启调试模式，查看报错信息。</p>
<p>也可以通过右击鼠标，选择 “检查” 来查看，Gif 图演示如下：</p>
<p>实例<br>“use strict”;<br>x = 3.14;       // 报错 (x 未定义)</p>
<p>尝试一下 »</p>
<p>实例<br>“use strict”;<br>myFunction();</p>
<p>function myFunction() {<br>    y = 3.14;   // 报错 (y 未定义)<br>}</p>
<p>尝试一下 »<br>在函数内部声明是局部作用域 (只在函数内使用严格模式):</p>
<p>实例<br>x = 3.14;       // 不报错<br>myFunction();</p>
<p>function myFunction() {<br>   “use strict”;<br>    y = 3.14;   // 报错 (y 未定义)<br>}</p>
<p>尝试一下 »<br>为什么使用严格模式:</p>
<p>消除Javascript语法的一些不合理、不严谨之处，减少一些怪异行为;<br>消除代码运行的一些不安全之处，保证代码运行的安全；<br>提高编译器效率，增加运行速度；<br>为未来新版本的Javascript做好铺垫。<br>“严格模式”体现了Javascript更合理、更安全、更严谨的发展方向，包括IE 10在内的主流浏览器，都已经支持它，许多大项目已经开始全面拥抱它。</p>
<p>另一方面，同样的代码，在”严格模式”中，可能会有不一样的运行结果；一些在”正常模式”下可以运行的语句，在”严格模式”下将不能运行。掌握这些内容，有助于更细致深入地理解Javascript，让你变成一个更好的程序员。</p>
<p>严格模式的限制<br>不允许使用未声明的变量：</p>
<p>“use strict”;<br>x = 3.14;                // 报错 (x 未定义)</p>
<p>尝试一下 »<br>Note    对象也是一个变量。</p>
<p>“use strict”;<br>x = {p1:10, p2:20};      // 报错 (x 未定义)</p>
<p>尝试一下 »<br>不允许删除变量或对象。</p>
<p>“use strict”;<br>var x = 3.14;<br>delete x;                // 报错</p>
<p>尝试一下 »<br>不允许删除函数。</p>
<p>“use strict”;<br>function x(p1, p2) {};<br>delete x;                // 报错 </p>
<p>尝试一下 »<br>不允许变量重名:</p>
<p>“use strict”;<br>function x(p1, p1) {};   // 报错</p>
<p>尝试一下 »<br>不允许使用八进制:</p>
<p>“use strict”;<br>var x = 010;             // 报错</p>
<p>尝试一下 »<br>不允许使用转义字符:</p>
<p>“use strict”;<br>var x = \010;            // 报错</p>
<p>尝试一下 »<br>不允许对只读属性赋值:</p>
<p>“use strict”;<br>var obj = {};<br>Object.defineProperty(obj, “x”, {value:0, writable:false});</p>
<p>obj.x = 3.14;            // 报错</p>
<p>尝试一下 »<br>不允许对一个使用getter方法读取的属性进行赋值</p>
<p>“use strict”;<br>var obj = {get x() {return 0} };</p>
<p>obj.x = 3.14;            // 报错</p>
<p>尝试一下 »<br>不允许删除一个不允许删除的属性：</p>
<p>“use strict”;<br>delete Object.prototype; // 报错</p>
<p>尝试一下 »<br>变量名不能使用 “eval” 字符串:</p>
<p>“use strict”;<br>var eval = 3.14;         // 报错</p>
<p>尝试一下 »<br>变量名不能使用 “arguments” 字符串:</p>
<p>“use strict”;<br>var arguments = 3.14;    // 报错</p>
<p>尝试一下 »<br>不允许使用以下这种语句:</p>
<p>“use strict”;<br>with (Math){x = cos(2)}; // 报错</p>
<p>尝试一下 »<br>由于一些安全原因，在作用域 eval() 创建的变量不能被调用：</p>
<p>“use strict”;<br>eval (“var x = 2”);<br>alert (x);               // 报错</p>
<p>尝试一下 »<br>禁止this关键字指向全局对象。</p>
<p>function f(){<br>    return !this;<br>}<br>// 返回false，因为”this”指向全局对象，”!this”就是false</p>
<p>function f(){<br>    “use strict”;<br>    return !this;<br>}<br>// 返回true，因为严格模式下，this的值为undefined，所以”!this”为true。<br>因此，使用构造函数时，如果忘了加new，this不再指向全局对象，而是报错。</p>
<p>function f(){<br>    “use strict”;<br>    this.a = 1;<br>};<br>f();// 报错，this未定义<br>保留关键字<br>为了向将来Javascript的新版本过渡，严格模式新增了一些保留关键字：</p>
<p>implements<br>interface<br>let<br>package<br>private<br>protected<br>public<br>static<br>yield<br>“use strict”;<br>var public = 1500;      // 报错</p>
<h2 id="变量提升"><a href="#变量提升" class="headerlink" title="变量提升"></a>变量提升</h2><p>JavaScript 中，函数及变量的声明都将被提升到函数的最顶部。</p>
<p>JavaScript 中，变量可以在使用后声明，也就是变量可以先使用再声明。</p>
<p>以下两个实例将获得相同的结果：</p>
<p>实例 1<br>x = 5; // 变量 x 设置为 5</p>
<p>elem = document.getElementById(“demo”); // 查找元素<br>elem.innerHTML = x;                     // 在元素中显示 x</p>
<p>var x; // 声明 x</p>
<p>尝试一下 »</p>
<p>实例 2<br>var x; // 声明 x<br>x = 5; // 变量 x 设置为 5</p>
<p>elem = document.getElementById(“demo”); // 查找元素<br>elem.innerHTML = x;                     // 在元素中显示 x</p>
<p>尝试一下 »<br>要理解以上实例就需要理解 “hoisting(变量提升)”。</p>
<p>变量提升：函数声明和变量声明总是会被解释器悄悄地被”提升”到方法体的最顶部。</p>
<p>JavaScript 初始化不会提升<br>JavaScript 只有声明的变量会提升，初始化的不会。</p>
<p>以下两个实例结果结果不相同：</p>
<p>实例 1<br>var x = 5; // 初始化 x<br>var y = 7; // 初始化 y</p>
<p>elem = document.getElementById(“demo”); // 查找元素<br>elem.innerHTML = x + “ “ + y;           // 显示 x 和 y</p>
<p>尝试一下 »</p>
<p>实例 2<br>var x = 5; // 初始化 x</p>
<p>elem = document.getElementById(“demo”); // 查找元素<br>elem.innerHTML = x + “ “ + y;           // 显示 x 和 y</p>
<p>var y = 7; // 初始化 y</p>
<p>尝试一下 »<br>实例 2 的 y 输出了 undefined，这是因为变量声明 (var y) 提升了，但是初始化(y = 7) 并不会提升，所以 y 变量是一个未定义的变量。</p>
<p>实例 2 类似以下代码:</p>
<p>var x = 5; // 初始化 x<br>var y;     // 声明 y</p>
<p>elem = document.getElementById(“demo”); // 查找元素<br>elem.innerHTML = x + “ “ + y;           // 显示 x 和 y</p>
<p>y = 7;    // 设置 y 为 7<br>在头部声明你的变量<br>对于大多数程序员来说并不知道 JavaScript 变量提升。</p>
<p>如果程序员不能很好的理解变量提升，他们写的程序就容易出现一些问题。</p>
<p>为了避免这些问题，通常我们在每个作用域开始前声明这些变量，这也是正常的 JavaScript 解析步骤，易于我们理解。</p>

    </div>

    
        <hr class="fhr">
        <div id="vcomments"></div>
    
</div>
    <div class="footer" id="footer">
    <p>Copyright © 2020 <a class="flink" target="_blank" rel="noopener" href="https://hexo.io">Hexo</a>-<a class="flink" target="_blank" rel="noopener" href="https://github.com/sanjinhub/hexo-theme-geek">Geek</a>.
        <label class="el-switch el-switch-green el-switch-sm" style="vertical-align: sub;">
            <input type="checkbox" name="switch" id="update_style">
            <span class="el-switch-style"></span>
        </label>
<!--         <script type="text/javascript">
        var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");
        document.write(unescape("%3Cspan id='cnzz_stat_icon_1278548644'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/stat.php%3Fid%3D1278548644%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
        </script> -->
    </p>
</div>
<input type="hidden" id="web_style" value="black">
<input type="hidden" id="valine_appid" value="CmCti21ooOOIzFOhEyFkFvR0-gzGzoHsz">
<input type="hidden" id="valine_appKey" value="FqiyUqbg7McKN2eG0MCewupf">

<script src="/libs/jquery.min.js"></script>


<script src="/libs/highlight/highlight.pack.js"></script>

<script src='//cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>

<script src="/js/js.js"></script>

<style type="text/css">
.v * {
    color: #698fca;
}

.v .vlist .vcard .vhead .vsys {
    color: #3a3e4a;
}

.v .vlist .vcard .vh .vmeta .vat {
    color: #638fd5;
}

.v .vlist .vcard .vhead .vnick {
    color: #6ba1ff;
}

.v a {
    color: #8696b1;
}

.v .vlist .vcard .vhead .vnick:hover {
    color: #669bfc;
}
</style>
</body>

</html>